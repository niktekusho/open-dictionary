language: node_js

cache: yarn

jobs:
  include:
  - stage: linux-full-build-node-8
    os: linux
    dist: xenial
    sudo: false
    node_js:
      - '8'
    services:
      - mongodb
	env:
  	  - MONGO_HOST=localhost
      - MONGO_PORT=27017
  - stage: linux-full-build-node-8
    os: linux
    dist: trusty
    sudo: false
    node_js:
      - '8'
    services:
      - mongodb
	env:
  	  - MONGO_HOST=localhost
      - MONGO_PORT=27017
  - stage: linux-full-build-node-10
    os: linux
    dist: xenial
    sudo: false
    node_js:
      - '10'
    services:
      - mongodb
	env:
  	  - MONGO_HOST=localhost
      - MONGO_PORT=27017
  - stage: linux-full-build-node-10
    os: linux
    dist: trusty
    sudo: false
    node_js:
      - '10'
    services:
      - mongodb
	env:
  	  - MONGO_HOST=localhost
      - MONGO_PORT=27017
  - stage: osx-no-int-test-build
    os: osx
    script: yarn unit
    node_js:
      - '8'
  - stage: osx-no-int-test-build
    os: osx
    script: yarn unit
    node_js:
      - '10'
